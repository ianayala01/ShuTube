<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <link rel="stylesheet" href="/style.css"/>
</head>
<body>
    <%- include('partials/navbar') %>

    <div class="vid">
        <h1><%= media.name %></h1>

        <video controls class="vid-player">
            <source src="/media/<%= media.filename %>" type="video/mp4" class="vid-img">
            <% if (media.subtitle) { %>
                <track label="English" kind="subtitles" srclang="en" src="/media/<%= media.subtitle %>" default>
            <% } %>
            Your browser does not support the video tag.
        </video>
        
        <label>
            <input type="checkbox" id="autoplayToggle"/>
            Autoplay Next
        </label>

  <% if (nextVideo) { %>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const video = document.querySelector('video');
        const autoplayToggle = document.getElementById('autoplayToggle');

        video.addEventListener('ended', () => {
          if (autoplayToggle && autoplayToggle.checked) {
            // Same logic as Next button
            window.location.href = '/media/<%= nextVideo.name %>';
          }
        });
      });
    </script>
  <% } %>

          
    </div>
</body>
</html>
